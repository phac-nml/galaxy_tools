<tool id="gnali" name="Get nonessential, LoF variants" version="0.1.0" python_template_version="3.6">
    <requirements>
        <requirement type="package" version="0.1">gnali</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        gnali -i '$input1' -o output
    ]]></command>
    <inputs>
        <param type="data" name="input1" format="txt" />
    </inputs>
    <outputs>
        <data name="output1" format="txt" from_work_dir="output/Nonessential_Host_Genes_\(Basic\).txt" />
        <data name="output2" format="txt" from_work_dir="output/Nonessential_Host_Genes_\(Detailed\).txt" />
    </outputs>
    <tests>
        <test>
            <param name="input1" value="test_genes.txt"/>
            <output name="output1">
                <assert_contents>
                    <has_text text="CCR5" />
                </assert_contents>
            </output>
            <output name="output2">
                <assert_contents>
                    <has_text_matching expression="Chromosome\tPosition_Start\tRSID\tReference_Allele\tAlternate_Allele\tScore\tQuality\tLoF_Variant\tLoF_Annotation\tHGNC_Symbol\tEnsembl Code" />
                    <has_text_matching expression="3\t46414935\trs938517991\tAT\tA\t9974.16\tPASS\t-\tframeshift_variant\tCCR5\tENSG00000160791" />
                    <has_text_matching expression="3\t46414943\trs775750898\tTACAGTCAGTATCAATTCTGGAAGAATTTCCAG\tT\t74264261.52\tPASS\t-\tframeshift_variant\tCCR5\tENSG00000160791" />
                    <has_text_matching expression="3\t46415066\trs146972949\tC\tT\t120238.89\tPASS\tT\tstop_gained\tCCR5\tENSG00000160791" />
                    <has_text_matching expression="3\t46414943\trs775750898\tTACAGTCAGTATCAATTCTGGAAGAATTTCCAG\tT\t1947603.90\tPASS\t-\tframeshift_variant\tCCR5\tENSG00000160791" />
                </assert_contents>
            </output>
        </test>
    </tests>
    <help><![CDATA[
        usage: 
            gNALI [-h] -i INPUT_FILE [-o OUTPUT_DIR] [-f]

Given a list of genes to test, gNALI finds all potential loss of function
variants of those genes.

optional arguments:
    -h, --help            show this help message and exit
    -i INPUT_FILE, --input_file INPUT_FILE
                            File of genes to test. Accepted formats: csv, txt
    -o OUTPUT_DIR, --output_dir OUTPUT_DIR
                            Name of output directory. Default: results-ID/
    -f, --force           Force existing output folder to be overwritten

    ]]></help>
    <citations>
        <citation type="bibtex">
@misc{github0.1,
  author = {LastTODO, FirstTODO},
  year = {TODO},
  title = {0.1},
  publisher = {GitHub},
  journal = {GitHub repository},
  url = {https://github.com/phac-nml/gnali/tree/release/0.1},
}</citation>
    </citations>
</tool>